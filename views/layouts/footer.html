{{define "layouts/footer"}}
  </main>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.min.js"></script>
  <script>
    function autoDismissFlash(scope) {
      (scope || document).querySelectorAll('.flash[data-autoclear="true"]').forEach(function (el) {
        setTimeout(function () {
          el.classList.add('flash-hide');
          setTimeout(function () { el.remove(); }, 400);
        }, 4200);
      });
    }
    autoDismissFlash();
    document.body.addEventListener('htmx:afterSwap', function (event) {
      autoDismissFlash(event.target);
    });
    document.body.addEventListener('search-reset', function () {
      var input = document.getElementById('search-query');
      if (input) {
        input.value = '';
        input.focus();
      }
      var results = document.getElementById('search-results');
      if (results) {
        results.innerHTML = '<p class="muted">Movie added! Search for another title.</p>';
      }
    });
  </script>
</body>
</html>
{{end}}
